*, *::before, *::after {
    padding: 0;
    margin: 0 auto;
    box-sizing: border-box;
  }
  
  $size: 50px;
  $speed: 4s;
  
  $clr1: rgb(0, 255, 34);
  $clr2: rgb(255, 0, 0);
  $clr3: rgb(0, 38, 255);
  
  body {
    background-color: #000;
    color: #fff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: $size * 15;
    overflow: hidden;
  }
  
  .container {
    position: relative;
    transform-style: preserve-3d;
    transform: rotateY(0deg);
    animation: rotate $speed * 20 infinite linear;
  
    @keyframes rotate {
      from { transform: rotatex(0deg) rotateY(0deg) rotateZ(0deg); }
      to { transform: rotatex(360deg) rotateY(720deg) rotateZ(360deg); }
    }
  
  }
  
  .pole {
    position: absolute;
    transform-style: preserve-3d;
  
    @for $p from 0 to 3 {
      &:nth-child(#{$p + 1}) {
        top: #{(($p * 3) - 3) * $size};
      }
    }
  
    & > div {
      position: absolute;
      background-color: #111c;
      box-shadow: 0 0 $size * 0.5 #000 inset;
      overflow: hidden;
  
      &:nth-child(n + 3)::before {
        content: '';
        position: absolute;
        top: 50%; left: 50%;
        width: 100%; height: $size * 2;
        background-image: linear-gradient(var(--clr0), var(--clr), var(--clr0));
        opacity: 0.25;
        animation: poleBack $speed infinite ease-in-out alternate;
      }
  
      @keyframes poleBack {
        0%   { transform: translate(-50%, calc(-50% + #{$size * 3.5})); }
        100% { transform: translate(-50%, calc(-50% - #{$size * 3.5})); }
      }
    }
  
    &:nth-child(1) > div::before {
      --clr: #{$clr1};
      --clr0: #{$clr1}0;
    }
    &:nth-child(2) > div::before {
      --clr: #{$clr2};
      --clr0: #{$clr2}0;
      animation-duration: $speed * 0.8;
    }
    &:nth-child(3) > div::before {
      --clr: #{$clr3};
      --clr0: #{$clr3}0;
      animation-duration: $speed * 1.2;
    }    
  
    & > div:nth-child(1) {
      width: $size; height: $size;
      transform: translate(-50%, -50%) translateZ($size * 4);
    }
    & > div:nth-child(2) {
      width: $size; height: $size;
      transform: translate(-50%, -50%) translateZ($size * -4);
    }
    & > div:nth-child(3) {
      width: $size; height: $size * 8;
      transform: translate(-50%, -50%) rotateX(90deg) translateZ($size * 0.5);
    }
    & > div:nth-child(4) {
      width: $size; height: $size * 8;
      transform: translate(-50%, -50%) rotateX(90deg) rotateY(90deg) translateZ($size * 0.5);
    }
    & > div:nth-child(5) {
      width: $size; height: $size * 8;
      transform: translate(-50%, -50%) rotateX(90deg) rotateY(180deg) translateZ($size * 0.5);
    }
    & > div:nth-child(6) {
      width: $size; height: $size * 8;
      transform: translate(-50%, -50%) rotateX(90deg) rotateY(270deg) translateZ($size * 0.5);
    }
  }
  
  .neon {
    position: absolute;
    width: $size * 2; height: $size * 2;
    border: 2px solid var(--clr);
    transform-style: preserve-3d;
    animation: neonMove $speed infinite ease-in-out alternate;
    box-shadow:
      0 0 $size*0.2 var(--clr) inset,
      0 0 $size*0.2 var(--clr);
  
    &_a {
      --clr: #{$clr1};
      top: $size * -3;
    }
    &_b {
      --clr: #{$clr2};
      top: $size * 0;
      animation-duration: $speed * 0.8;
    }
    &_c {
      --clr: #{$clr3};
      top: $size * 3;
      animation-duration: $speed * 1.2;
    }
  
    & > div {
      position: absolute;
      background-color: var(--clr);
      box-shadow: 0 0 $size*0.2 var(--clr);
  
      &:nth-child(1) {
        top: -1px; left: -1px;
        width: calc(100% + 2px); height: 2px;
        transform: translateY(-50%) rotateX(90deg);
      }
      &:nth-child(2) {
        top: -1px; left: -2px;
        width: 2px; height: calc(100% + 2px);
        transform: rotateY(90deg);
      }
      &:nth-child(3) {
        bottom: -1px; left: -1px;
        width: calc(100% + 2px); height: 2px;
        transform: translateY(50%) rotateX(90deg);
      }
      &:nth-child(4) {
        top: -1px; right: -2px;
        width: 2px; height: calc(100% + 2px);
        transform: rotateY(90deg);
      }
    }
  
    @keyframes neonMove {
      0% { transform: translate(-50%, -50%) translateZ($size * 3.5); }
      100% { transform: translate(-50%, -50%) translateZ($size * -3.5); }
    }
  }